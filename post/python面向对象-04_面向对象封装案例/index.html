<!DOCTYPE html>
<html lang="en"><meta charset="utf-8"><meta name="generator" content="Hugo 0.86.1" /><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<meta name="color-scheme" content="light dark">
<meta name="supported-color-schemes" content="light dark"><title>Python面向对象-04-面向对象封装案例&nbsp;&ndash;&nbsp;Wei Chu</title><link rel="stylesheet" href="/css/core.min.746d4f5e0f69f8ca3fdabdfef6b99d63a9852de221102d14b47177e2a4e0fb979941c84b1ae5b6a490e592140624482e.css" integrity="sha384-dG1PXg9p&#43;Mo/2r3&#43;9rmdY6mFLeIhEC0UtHF34qTg&#43;5eZQchLGuW2pJDlkhQGJEgu"><body>
    <div class="base-body"><section id="header" class="site header">
    <div class="header wrap"><span class="header left-side"><a class="site home" href="/"><img class="site logo" src="/images/logo.png" alt /><span class="site name">Wei Chu</span></a></span>
        <span class="header right-side"><div class="nav wrap"><nav class="nav"><a class="nav item" href="/categories/">Categories</a><a class="nav item" href="/tags/">Tags</a><a class="nav item" href="/about/">About</a><a class="nav item" href="https://gohugo.io/"target="_blank">Hugo</a></nav></div></span></div><div class="site slogan"><span class="title">醉后不知天在水 满船清梦压星河</span></div></section><div id="content"><section class="article header">
    <h1 class="article title">Python面向对象-04-面向对象封装案例</h1><p class="article date">Oct 22, 2021<span class="reading-time"> • 3 minutes to read</span></p></section><article class="article markdown-body"><h1 id="面向对象封装案例">面向对象封装案例</h1>
<h2 id="目标">目标</h2>
<ul>
<li>封装</li>
<li>小明爱跑步</li>
<li>存放家具</li>
</ul>
<h3 id="01-封装">01. 封装</h3>
<ol>
<li><strong>封装</strong> 是面向对象编程的一大特点</li>
<li>面向对象编程的 <strong>第一步</strong> —— 将 <strong>属性</strong> 和 <strong>方法</strong> <strong>封装</strong> 到一个抽象的 <strong>类</strong> 中</li>
<li><strong>外界</strong> 使用 <strong>类</strong> 创建 <strong>对象</strong>，然后 <strong>让对象调用方法</strong></li>
<li><strong>对象方法的细节</strong> 都被 <strong>封装</strong> 在 <strong>类的内部</strong></li>
</ol>
<h2 id="02-小明爱跑步">02. 小明爱跑步</h2>
<p><strong>需求</strong></p>
<ol>
<li><strong>小明</strong> <strong>体重</strong> <code>75.0</code> 公斤</li>
<li>小明每次 <strong>跑步</strong> 会减肥 <code>0.5</code> 公斤</li>
<li>小明每次 <strong>吃东西</strong> 体重增加 <code>1</code> 公斤</li>
</ol>
<p><a target="_blank" rel="noopener noreferrer" 
  href="media/15006177106970/007_%E5%B0%8F%E6%98%8E%E7%88%B1%E8%B7%91%E6%AD%A5.png"><img  src="media/15006177106970/007_%E5%B0%8F%E6%98%8E%E7%88%B1%E8%B7%91%E6%AD%A5.png"
        alt="007_小明爱跑步-w328"/></a></p>
<blockquote>
<p>提示：在 <strong>对象的方法内部</strong>，是可以 <strong>直接访问对象的属性</strong> 的！</p>
</blockquote>
<ul>
<li>代码实现：</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="k">class</span> <span class="nc">Person</span><span class="p">:</span>
    <span class="s2">&#34;&#34;&#34;人类&#34;&#34;&#34;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">weight</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">weight</span> <span class="o">=</span> <span class="n">weight</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">return</span> <span class="s2">&#34;我的名字叫 </span><span class="si">%s</span><span class="s2"> 体重 </span><span class="si">%.2f</span><span class="s2"> 公斤&#34;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">weight</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s2">&#34;&#34;&#34;跑步&#34;&#34;&#34;</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;</span><span class="si">%s</span><span class="s2"> 爱跑步，跑步锻炼身体&#34;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">weight</span> <span class="o">-=</span> <span class="mf">0.5</span>

    <span class="k">def</span> <span class="nf">eat</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s2">&#34;&#34;&#34;吃东西&#34;&#34;&#34;</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;</span><span class="si">%s</span><span class="s2"> 是吃货，吃完这顿再减肥&#34;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">weight</span> <span class="o">+=</span> <span class="mi">1</span>


<span class="n">xiaoming</span> <span class="o">=</span> <span class="n">Person</span><span class="p">(</span><span class="s2">&#34;小明&#34;</span><span class="p">,</span> <span class="mi">75</span><span class="p">)</span>

<span class="n">xiaoming</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
<span class="n">xiaoming</span><span class="o">.</span><span class="n">eat</span><span class="p">()</span>
<span class="n">xiaoming</span><span class="o">.</span><span class="n">eat</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="n">xiaoming</span><span class="p">)</span>

</code></pre></div><h3 id="21-小明爱跑步扩展--小美也爱跑步">2.1 小明爱跑步扩展 —— 小美也爱跑步</h3>
<p><strong>需求</strong></p>
<ol>
<li><strong>小明</strong> 和 <strong>小美</strong> 都爱跑步</li>
<li><strong>小明</strong> <strong>体重</strong> <code>75.0</code> 公斤</li>
<li><strong>小美</strong> <strong>体重</strong> <code>45.0</code> 公斤</li>
<li>每次 <strong>跑步</strong> 都会减少 <code>0.5</code> 公斤</li>
<li>每次 <strong>吃东西</strong> 都会增加 <code>1</code> 公斤</li>
</ol>
<p><a target="_blank" rel="noopener noreferrer" 
  href="media/15006177106970/007_%E5%B0%8F%E6%98%8E%E7%88%B1%E8%B7%91%E6%AD%A5.png"><img  src="media/15006177106970/007_%E5%B0%8F%E6%98%8E%E7%88%B1%E8%B7%91%E6%AD%A5.png"
        alt="007_小明爱跑步-w328"/></a></p>
<p><strong>提示</strong></p>
<ol>
<li>在 <strong>对象的方法内部</strong>，是可以 <strong>直接访问对象的属性</strong> 的</li>
<li><strong>同一个类</strong> 创建的 <strong>多个对象</strong> 之间，<strong>属性</strong> 互不干扰！</li>
</ol>
<p><a target="_blank" rel="noopener noreferrer" 
  href="media/15006177106970/001_%E6%A4%8D%E7%89%A9%E5%A4%A7%E6%88%98%E5%83%B5%E5%B0%B8.png"><img  src="media/15006177106970/001_%E6%A4%8D%E7%89%A9%E5%A4%A7%E6%88%98%E5%83%B5%E5%B0%B8.png"
        alt="001_植物大战僵尸"/></a></p>
<h2 id="03-摆放家具">03. 摆放家具</h2>
<p><strong>需求</strong></p>
<ol>
<li><strong>房子(House)</strong> 有 <strong>户型</strong>、<strong>总面积</strong> 和 <strong>家具名称列表</strong>
<ul>
<li>新房子没有任何的家具</li>
</ul>
</li>
<li><strong>家具(HouseItem)</strong> 有 <strong>名字</strong> 和 <strong>占地面积</strong>，其中
<ul>
<li><strong>席梦思(bed)</strong> 占地 <code>4</code> 平米</li>
<li><strong>衣柜(chest)</strong> 占地 <code>2</code> 平米</li>
<li><strong>餐桌(table)</strong> 占地 <code>1.5</code> 平米</li>
</ul>
</li>
<li>将以上三件 <strong>家具</strong> <strong>添加</strong> 到 <strong>房子</strong> 中</li>
<li>打印房子时，要求输出：<strong>户型</strong>、<strong>总面积</strong>、<strong>剩余面积</strong>、<strong>家具名称列表</strong></li>
</ol>
<p><a target="_blank" rel="noopener noreferrer" 
  href="media/15006177106970/008_%E6%91%86%E6%94%BE%E5%AE%B6%E5%85%B7.png"><img  src="media/15006177106970/008_%E6%91%86%E6%94%BE%E5%AE%B6%E5%85%B7.png"
        alt="008_摆放家具-w723"/></a></p>
<p><strong>剩余面积</strong></p>
<ol>
<li>在创建房子对象时，定义一个 <strong>剩余面积的属性</strong>，<strong>初始值和总面积相等</strong></li>
<li>当调用 <code>add_item</code> 方法，向房间 <strong>添加家具</strong> 时，让 <strong>剩余面积</strong> -= <strong>家具面积</strong></li>
</ol>
<p><strong>思考</strong>：应该先开发哪一个类？</p>
<p><strong>答案</strong> —— <strong>家具类</strong></p>
<ol>
<li>家具简单</li>
<li>房子要使用到家具，<strong>被使用的类</strong>，通常应该先开发</li>
</ol>
<h3 id="31-创建家具">3.1 创建家具</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="k">class</span> <span class="nc">HouseItem</span><span class="p">:</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">area</span><span class="p">):</span>
        <span class="s2">&#34;&#34;&#34;
</span><span class="s2">
</span><span class="s2">        :param name: 家具名称
</span><span class="s2">        :param area: 占地面积
</span><span class="s2">        &#34;&#34;&#34;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">area</span> <span class="o">=</span> <span class="n">area</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&#34;[</span><span class="si">%s</span><span class="s2">] 占地面积 </span><span class="si">%.2f</span><span class="s2">&#34;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">area</span><span class="p">)</span>


<span class="c1"># 1. 创建家具</span>
<span class="n">bed</span> <span class="o">=</span> <span class="n">HouseItem</span><span class="p">(</span><span class="s2">&#34;席梦思&#34;</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">chest</span> <span class="o">=</span> <span class="n">HouseItem</span><span class="p">(</span><span class="s2">&#34;衣柜&#34;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">table</span> <span class="o">=</span> <span class="n">HouseItem</span><span class="p">(</span><span class="s2">&#34;餐桌&#34;</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">bed</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">chest</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>

</code></pre></div><p><strong>小结</strong></p>
<ol>
<li>创建了一个 <strong>家具类</strong>，使用到 <code>__init__</code> 和 <code>__str__</code> 两个内置方法</li>
<li>使用 <strong>家具类</strong> 创建了 <strong>三个家具对象</strong>，并且 <strong>输出家具信息</strong></li>
</ol>
<h3 id="32-创建房间">3.2 创建房间</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="k">class</span> <span class="nc">House</span><span class="p">:</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">house_type</span><span class="p">,</span> <span class="n">area</span><span class="p">):</span>
        <span class="s2">&#34;&#34;&#34;
</span><span class="s2">
</span><span class="s2">        :param house_type: 户型
</span><span class="s2">        :param area: 总面积
</span><span class="s2">        &#34;&#34;&#34;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">house_type</span> <span class="o">=</span> <span class="n">house_type</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">area</span> <span class="o">=</span> <span class="n">area</span>
        
        <span class="c1"># 剩余面积默认和总面积一致</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">free_area</span> <span class="o">=</span> <span class="n">area</span>
        <span class="c1"># 默认没有任何的家具</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">item_list</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="c1"># Python 能够自动的将一对括号内部的代码连接在一起</span>
        <span class="k">return</span> <span class="p">(</span><span class="s2">&#34;户型：</span><span class="si">%s</span><span class="se">\n</span><span class="s2">总面积：</span><span class="si">%.2f</span><span class="s2">[剩余：</span><span class="si">%.2f</span><span class="s2">]</span><span class="se">\n</span><span class="s2">家具：</span><span class="si">%s</span><span class="s2">&#34;</span>
                <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">house_type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">area</span><span class="p">,</span>
                   <span class="bp">self</span><span class="o">.</span><span class="n">free_area</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">item_list</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">add_item</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;要添加 </span><span class="si">%s</span><span class="s2">&#34;</span> <span class="o">%</span> <span class="n">item</span><span class="p">)</span>

<span class="o">...</span>

<span class="c1"># 2. 创建房子对象</span>
<span class="n">my_home</span> <span class="o">=</span> <span class="n">House</span><span class="p">(</span><span class="s2">&#34;两室一厅&#34;</span><span class="p">,</span> <span class="mi">60</span><span class="p">)</span>

<span class="n">my_home</span><span class="o">.</span><span class="n">add_item</span><span class="p">(</span><span class="n">bed</span><span class="p">)</span>
<span class="n">my_home</span><span class="o">.</span><span class="n">add_item</span><span class="p">(</span><span class="n">chest</span><span class="p">)</span>
<span class="n">my_home</span><span class="o">.</span><span class="n">add_item</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">my_home</span><span class="p">)</span>
</code></pre></div><p><strong>小结</strong></p>
<ol>
<li>创建了一个 <strong>房子类</strong>，使用到 <code>__init__</code> 和 <code>__str__</code> 两个内置方法</li>
<li>准备了一个 <code>add_item</code> 方法 <strong>准备添加家具</strong></li>
<li>使用 <strong>房子类</strong> 创建了 <strong>一个房子对象</strong></li>
<li>让 <strong>房子对象</strong> 调用了三次 <code>add_item</code> 方法，将 <strong>三件家具</strong> 以实参传递到 <code>add_item</code> 内部</li>
</ol>
<h3 id="33-添加家具">3.3 添加家具</h3>
<p><strong>需求</strong></p>
<ul>
<li>1&gt; <strong>判断</strong> <strong>家具的面积</strong> 是否 <strong>超过剩余面积</strong>，<strong>如果超过</strong>，提示不能添加这件家具</li>
<li>2&gt; 将 <strong>家具的名称</strong> 追加到 <strong>家具名称列表</strong> 中</li>
<li>3&gt; 用 <strong>房子的剩余面积</strong> - <strong>家具面积</strong></li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python">    <span class="k">def</span> <span class="nf">add_item</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;要添加 </span><span class="si">%s</span><span class="s2">&#34;</span> <span class="o">%</span> <span class="n">item</span><span class="p">)</span>
        <span class="c1"># 1. 判断家具面积是否大于剩余面积</span>
        <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">area</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">free_area</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;</span><span class="si">%s</span><span class="s2"> 的面积太大，不能添加到房子中&#34;</span> <span class="o">%</span> <span class="n">item</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

            <span class="k">return</span>

        <span class="c1"># 2. 将家具的名称追加到名称列表中</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">item_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

        <span class="c1"># 3. 计算剩余面积</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">free_area</span> <span class="o">-=</span> <span class="n">item</span><span class="o">.</span><span class="n">area</span>
</code></pre></div><h3 id="34-小结">3.4 小结</h3>
<ul>
<li>主程序只负责创建 <strong>房子</strong> 对象和 <strong>家具</strong> 对象</li>
<li>让 <strong>房子</strong> 对象调用 <code>add_item</code> 方法 <strong>将家具添加到房子</strong>中</li>
<li><strong>面积计算</strong>、<strong>剩余面积</strong>、<strong>家具列表</strong> 等处理都被 <strong>封装</strong> 到 <strong>房子类的内部</strong></li>
</ul></article><section class="article labels"><a class="category" href=/categories/python%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/>Python面向对象</a><a class="tag" href=/tags/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E5%B0%81%E8%A3%85%E6%A1%88%E4%BE%8B/>面向对象封装案例</a></section><section class="article navigation"><p><a class="link" href="/post/python%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1-03_%E9%9D%A2%E7%9B%B8%E5%AF%B9%E8%B1%A1%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95/"><span class="li">&larr;</span>Python面向对象-03-面相对象基础语法</a></p><p><a class="link" href="/post/python%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1-05_%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E5%B0%81%E8%A3%85%E6%A1%88%E4%BE%8B-ii/"><span class="li">&rarr;</span>Python面向对象-05-面向对象封装案例 II</a class="link">
    </p></section></div><section id="footer" class="footer">
    <script src="https://utteranc.es/client.js"
        repo="ChuWeiEr/hugoblogtalks"
        issue-term="pathname"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script><div class="footer-wrap">
    <p class="copyright">©2020 Notepadium.</p>
    <p class="powerby"><span>Powered by </span><a href="https://gohugo.io" 
        target="_blank">Hugo</a><span> and the </span><a href="https://themes.gohugo.io/hugo-notepadium/" 
        target="_blank">Notepadium</a></p>
</div></section><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css" integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/&#43;DiW/UqRcLbRjq" crossorigin="anonymous"><script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js" integrity="sha384-y23I5Q6l&#43;B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd&#43;qj&#43;o24G5ZU2zJz" crossorigin="anonymous"></script><script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js" integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous"
            onload="renderMathInElement(document.body);"></script></div>
</body>

</html>